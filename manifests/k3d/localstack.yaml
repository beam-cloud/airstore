apiVersion: helm.cattle.io/v1
kind: HelmChart
metadata:
  name: localstack
  namespace: airstore
spec:
  repo: https://localstack.github.io/helm-charts
  chart: localstack
  createNamespace: false
  version: 0.6.5
  valuesContent: |-
    extraEnvVars:
    - name: SERVICES
      value: "s3"
    enableStartupScripts: true
    startupScriptContent: |
      #!/bin/bash
      # Create the images bucket (used by worker image caching)
      awslocal s3 mb s3://airstore-images
      # Note: Workspace storage buckets (workspace-{external_id}) are created
      # dynamically when workspaces are created via the API
    persistence:
      enabled: true
      storageClass: local-path
      accessModes:
      - ReadWriteOnce
      size: 10Gi

